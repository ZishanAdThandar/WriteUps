<header class="site-header">

  <h1 class="site-title">
    {{ site.title }}
  </h1>

  <p class="site-tagline">
    {{ site.tagline }}
  </p>

  <div class="nav-container">
    <button class="mobile-nav-toggle" id="mobileNavToggle">
      <i class="fas fa-bars"></i> Menu
    </button>

    <nav class="main-nav" id="mainNav">
      <a href="/" class="nav-link"><i class="fas fa-home"></i> Home</a>

      <div class="nav-dropdown" id="ctfDropdown">
        <button class="dropdown-btn" id="ctfBtn">
          <i class="fas fa-flag"></i> CTF 
        </button>
        <div class="dropdown-content">
          <a href="/posts/hackthebox/"><i class="fas fa-cube"></i> HackTheBox</a>
          <a href="/posts/tryhackme/"><i class="fas fa-tv"></i> TryHackMe</a>
          <a href="/posts/offsec/"><i class="fas fa-shield-alt"></i> OffSec</a>
          <a href="/posts/vulnhub/"><i class="fas fa-server"></i> VulnHub</a>
        </div>
      </div>

      <a href="/posts/bugbounty/" class="nav-link"><i class="fas fa-bug"></i> Bug Bounty</a>
      <a href="/posts/blog/" class="nav-link"><i class="fas fa-blog"></i> Articles</a>
      <a href="{{ site.main_site }}" class="nav-link"><i class="fas fa-globe"></i> Website</a>
    </nav>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const toggle = document.getElementById("mobileNavToggle");
      const nav = document.getElementById("mainNav");
      const dropdownBtn = document.getElementById("ctfBtn");
      const dropdown = document.getElementById("ctfDropdown");
      
      // Mobile menu toggle
      toggle.addEventListener("click", function(e) {
        e.stopPropagation();
        nav.classList.toggle("active");
        // Toggle aria-expanded for accessibility
        const isExpanded = nav.classList.contains("active");
        toggle.setAttribute("aria-expanded", isExpanded);
        
        // Close dropdown when mobile menu opens
        dropdown.classList.remove("open");
      });
      
      // Desktop dropdown toggle
      dropdownBtn.addEventListener("click", function(e) {
        e.stopPropagation();
        dropdown.classList.toggle("open");
      });
      
      // Close dropdown when clicking outside
      document.addEventListener("click", function(e) {
        if (!dropdown.contains(e.target) && !dropdownBtn.contains(e.target)) {
          dropdown.classList.remove("open");
        }
        
        // Close mobile menu when clicking outside on mobile
        if (window.innerWidth <= 768 && !nav.contains(e.target) && !toggle.contains(e.target)) {
          nav.classList.remove("active");
          toggle.setAttribute("aria-expanded", "false");
        }
      });
      
      // Close dropdown when clicking a link inside it
      dropdown.querySelectorAll('a').forEach(function(link) {
        link.addEventListener('click', function() {
          dropdown.classList.remove("open");
          // Close mobile menu too if open
          if (window.innerWidth <= 768) {
            nav.classList.remove("active");
            toggle.setAttribute("aria-expanded", "false");
          }
        });
      });
      
      // Close mobile menu when clicking any nav link
      document.querySelectorAll('.main-nav a').forEach(function(link) {
        link.addEventListener('click', function() {
          if (window.innerWidth <= 768) {
            nav.classList.remove("active");
            toggle.setAttribute("aria-expanded", "false");
          }
        });
      });
      
      // Close dropdown when window is resized
      window.addEventListener('resize', function() {
        if (window.innerWidth > 768) {
          nav.classList.remove("active");
          toggle.setAttribute("aria-expanded", "false");
        }
      });
    });
  </script>
</header>
